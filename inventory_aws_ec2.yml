plugin: aws_ec2
regions:
  - us-east-1

filters:
  tag:Project: webdev-lab
  instance-state-name: running

keyed_groups:
  - key: tags.Role
    prefix: tag_Role_
    separator: ''

hostnames:
  - tag:Name
  - private_dns_name
  - public_dns_name

compose:
  ansible_host: >-
    {%- if tags.Role == "Bastion" -%}
    {{ public_ip_address }}
    {%- else -%}
    {{ private_ip_address }}
    {%- endif -%}
